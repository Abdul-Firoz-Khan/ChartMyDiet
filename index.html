<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü•óChartMyDiet - Personalized Diet Planning</title>
    <!-- Add jsPDF library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* üåà Root Color Palette */
        :root {
            --primary-color: #7C3AED;
            --primary-hover: #6D28D9;
            --header-bg: linear-gradient(180deg, #EEF2FF 0%, #E0E7FF 100%);
            --body-bg: #F9FAFB;
            --card-bg: #FFFFFF;
            --card-shadow: rgba(0, 0, 0, 0.08);
            --text-color: #111827;
            --text-muted: #6B7280;
            --footer-bg: #1F2937;
            --footer-text: #D1D5DB;
            --border: #E5E7EB;
            --success: #10B981;
            --error: #EF4444;
            --day1-color: #7C3AED; /* Purple for Day 1 */
            --day2-color: #059669; /* Green for Day 2 */
        }
        
        /* üß† General Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background-color: var(--body-bg);
            color: var(--text-color);
            font-family: 'Inter', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* ================================
           üî≤ Navigation Bar
           ================================ */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 5%;
            background: #fff;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }
        
        .navbar .logo {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            cursor: pointer;
        }
        
        .navbar ul {
            display: flex;
            list-style: none;
        }
        
        .navbar li {
            margin-left: 30px;
        }
        
        .navbar a {
            text-decoration: none;
            color: var(--text-muted);
            transition: color 0.3s;
        }
        
        .navbar a:hover {
            color: var(--primary-color);
        }
        
        /* ================================
           üåÖ Header Section
           ================================ */
        header {
            background: var(--header-bg);
            text-align: center;
            padding: 2.5rem 1rem;
        }
        
        header h1 {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        header p {
            font-size: 1rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }
        
        .cta-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 30px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: transform 0.3s, background-color 0.3s;
            margin-top: 1rem;
        }
        
        .cta-button:hover {
            background-color: var(--primary-hover);
            transform: translateY(-2px);
        }
        
        /* ================================
           üßæ Main Form Card
           ================================ */
        .form-section {
            background-color: white;
            padding: 60px 0;
        }
        
        .form-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--card-shadow);
            padding: 2rem 2.5rem;
        }
        
        .form-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary-color);
            font-size: 1.4rem;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-color);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
            background: #fff;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .radio-group, .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .radio-option, .checkbox-option {
            display: flex;
            align-items: center;
        }
        
        .radio-option input, .checkbox-option input {
            margin-right: 8px;
            accent-color: var(--primary-color);
        }
        
        .checkbox-option input:disabled + label {
            color: var(--text-muted);
            cursor: not-allowed;
        }
        
        .height-inputs {
            display: flex;
            gap: 15px;
        }
        
        .height-inputs > div {
            flex: 1;
        }
        
        .height-unit-selector {
            display: flex;
            margin-bottom: 15px;
        }
        
        .height-unit-selector button {
            flex: 1;
            padding: 10px;
            border: 1px solid var(--border);
            background-color: white;
            cursor: pointer;
        }
        
        .height-unit-selector button:first-child {
            border-radius: 8px 0 0 8px;
        }
        
        .height-unit-selector button:last-child {
            border-radius: 0 8px 8px 0;
        }
        
        .height-unit-selector button.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .error-message {
            color: var(--error);
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        .submit-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: background-color 0.3s, transform 0.2s;
        }
        
        .submit-btn:hover {
            background-color: var(--primary-hover);
            transform: translateY(-1px);
        }
        
        .submit-btn:disabled {
            background-color: #A78BFA;
            cursor: not-allowed;
            transform: none;
        }
        
        /* ================================
           ‚öôÔ∏è Utility Classes
           ================================ */
        .text-muted {
            color: var(--text-muted);
        }
        
        .text-center {
            text-align: center;
        }
        
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        
        /* ================================
           üìã About Section
           ================================ */
        .about-section {
            background-color: white;
            padding: 60px 0;
            display: none;
        }
        
        .about-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--card-shadow);
            padding: 2rem 2.5rem;
        }
        
        .about-title {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary-color);
            font-size: 1.4rem;
        }
        
        /* ================================
           üîÑ Loading Section
           ================================ */
        .loading-section {
            display: none;
            text-align: center;
            padding: 40px 0;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ================================
           üìä Results Section
           ================================ */
        .results-section {
            display: none;
            padding: 40px 0;
        }
        
        .diet-plan {
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 16px var(--card-shadow);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .diet-plan h2 {
            margin-bottom: 20px;
            color: var(--primary-color);
            text-align: center;
        }
        
        .plan-header {
            background-color: #F3F4F6;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .health-profile {
            background-color: #EDE9FE;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .meal-section {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px dashed var(--border);
        }
        
        .meal-section:last-child {
            border-bottom: none;
        }
        
        .meal-section h3 {
            margin-bottom: 10px;
            color: var(--text-color);
        }
        
        .meal-section ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .meal-section li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .meal-section li:before {
            content: "‚Ä¢";
            color: var(--primary-color);
            position: absolute;
            left: 0;
        }
        
        .day-header {
            font-weight: bold;
            margin-top: 10px;
        }
        
        .day-1 {
            color: var(--day1-color);
        }
        
        .day-2 {
            color: var(--day2-color);
        }
        
        .day-content {
            color: var(--text-color);
        }
        
        .special-considerations {
            background-color: #FEF3C7;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .special-considerations h3 {
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .disclaimer {
            font-size: 14px;
            color: var(--text-muted);
            margin-top: 20px;
            font-style: italic;
            background-color: #F3F4F6;
            padding: 15px;
            border-radius: 8px;
        }
        
        .download-btn {
            background-color: var(--success);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s, transform 0.2s;
        }
        
        .download-btn:hover {
            background-color: #059669;
            transform: translateY(-1px);
        }

        /* PDF specific styles */
        @media print {
            .navbar, .download-btn, .submit-btn {
                display: none !important;
            }
            
            .diet-plan {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }
        
        /* ================================
           ü¶∂ Footer
           ================================ */
        footer {
            background-color: var(--footer-bg);
            color: var(--footer-text);
            text-align: center;
            padding: 2rem;
            font-size: 0.9rem;
        }
        
        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .footer-logo {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary-color);
        }
        
        .footer-contact {
            margin-bottom: 20px;
            font-size: 16px;
        }
        
        .footer-copyright {
            font-size: 14px;
            color: #9CA3AF;
        }
        
        footer a {
            color: var(--footer-text);
            text-decoration: none;
        }
        
        footer a:hover {
            color: var(--primary-color);
        }
        
        /* ================================
           üì± Responsive Design
           ================================ */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                text-align: center;
            }
            
            .navbar ul {
                margin-top: 20px;
                justify-content: center;
            }
            
            .navbar li {
                margin: 0 10px;
            }
            
            header h1 {
                font-size: 1.4rem;
            }
            
            .form-container, .about-container {
                padding: 1.5rem;
                margin: 1.5rem;
            }
            
            .height-inputs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo" id="home-link">ü•óChartMyDiet</div>
        <ul>
            <li><a href="#" id="home-nav">Home</a></li>
            <li><a href="#" id="about-nav">About</a></li>
            <li><a href="#" id="contact-nav">Contact</a></li>
        </ul>
    </nav>

    <header id="header-section">
        <div class="container">
            <h1>Personalized Diet Planning Made Simple</h1>
            <p>Get a customized 2-day Indian diet plan based on your unique profile</p>
            <a href="#diet-form" class="cta-button">Create Your Personalized Diet Plan</a>
        </div>
    </header>

    <section class="about-section" id="about-section">
        <div class="container">
            <div class="about-container">
                <h2 class="about-title">About ChartMyDiet</h2>
                <p>ChartMyDiet is an innovative platform that creates personalized 2-day Indian diet plans tailored to your unique health profile, dietary restrictions, and lifestyle needs.</p>
                <p class="mt-2">Our algorithm considers your age, gender, weight, height, activity level, dietary preferences, and health conditions to generate a scientifically-balanced meal plan that helps you achieve your health goals.</p>
                <p class="mt-2">Whether you're looking to lose weight, gain muscle, manage a health condition, or simply maintain a healthy lifestyle, ChartMyDiet provides practical, culturally-relevant meal suggestions that fit your needs.</p>
            </div>
        </div>
    </section>

    <section class="form-section" id="diet-form">
        <div class="container">
            <div class="form-container">
                <h2 class="form-title">Fill all my details to get automated 2-day Indian diet plan tailored to your needs</h2>
                <form id="diet-form-element">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" id="name" class="form-control" required>
                        <div class="error-message" id="name-error">Please enter your name</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select id="gender" class="form-control" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                        <div class="error-message" id="gender-error">Please select your gender</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" class="form-control" min="15" max="100" required>
                        <div class="error-message" id="age-error">Please enter a valid age between 15 and 100</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="weight">Weight (kg)</label>
                        <input type="number" id="weight" class="form-control" min="1" required>
                        <div class="error-message" id="weight-error">Please enter a valid weight</div>
                    </div>
                    
                    <div class="form-group">
                        <label>Height</label>
                        <div class="height-unit-selector">
                            <button type="button" class="active" data-unit="cm">Centimeters</button>
                            <button type="button" data-unit="ft">Feet/Inches</button>
                        </div>
                        <div id="height-cm-input">
                            <input type="number" id="height-cm" class="form-control" min="1" required>
                            <div class="error-message" id="height-cm-error">Please enter a valid height</div>
                        </div>
                        <div id="height-ft-input" style="display: none;">
                            <div class="height-inputs">
                                <div>
                                    <input type="number" id="height-ft" class="form-control" placeholder="Feet" min="0">
                                    <div class="error-message" id="height-ft-error">Please enter feet</div>
                                </div>
                                <div>
                                    <input type="number" id="height-in" class="form-control" placeholder="Inches" min="0" max="11">
                                    <div class="error-message" id="height-in-error">Please enter inches (0-11)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Activity Level</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="very-active" name="activity" value="Very Active" required>
                                <label for="very-active">Very Active</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="moderately-active" name="activity" value="Moderately Active">
                                <label for="moderately-active">Moderately Active</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="no-exercise" name="activity" value="No Exercise">
                                <label for="no-exercise">No Exercise</label>
                            </div>
                        </div>
                        <div class="error-message" id="activity-error">Please select your activity level</div>
                    </div>
                    
                    <div class="form-group">
                        <label>Diet Restriction</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="jain" name="diet" value="Jain" required>
                                <label for="jain">Jain</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="vegan" name="diet" value="Vegan">
                                <label for="vegan">Vegan</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="vegetarian" name="diet" value="Vegetarian">
                                <label for="vegetarian">Vegetarian</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="non-restrictive" name="diet" value="Non-restrictive">
                                <label for="non-restrictive">Non-restrictive</label>
                            </div>
                        </div>
                        <div class="error-message" id="diet-error">Please select your diet restriction</div>
                    </div>

                    <!-- NEW GOAL FIELD -->
                    <div class="form-group">
                        <label>Goal (Optional)</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="muscle-gain" name="goal" value="Muscle Gain">
                                <label for="muscle-gain">Muscle Gain</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="fat-loss" name="goal" value="Fat Loss">
                                <label for="fat-loss">Fat Loss</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="maintenance" name="goal" value="Maintenance">
                                <label for="maintenance">Maintenance</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Disease</label>
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" id="no-disease" name="disease" value="No Disease">
                                <label for="no-disease">No Disease</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="high-bp" name="disease" value="High Blood Pressure">
                                <label for="high-bp">High Blood Pressure</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="low-bp" name="disease" value="Low Blood Pressure">
                                <label for="low-bp">Low Blood Pressure</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="pcos" name="disease" value="PCOS">
                                <label for="pcos">PCOS</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="diabetes" name="disease" value="Diabetes">
                                <label for="diabetes">Diabetes</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="diabetes-mellitus" name="disease" value="Diabetes Mellitus">
                                <label for="diabetes-mellitus">Diabetes Mellitus</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="hypertension" name="disease" value="Hypertension">
                                <label for="hypertension">Hypertension</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="hypothyroidism" name="disease" value="Hypothyroidism">
                                <label for="hypothyroidism">Hypothyroidism</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="hyperthyroidism" name="disease" value="Hyperthyroidism">
                                <label for="hyperthyroidism">Hyperthyroidism</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="anemia" name="disease" value="Anemia">
                                <label for="anemia">Anemia</label>
                            </div>
                        </div>
                        <div class="error-message" id="disease-error">Please select at least one disease option</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email (Optional)</label>
                        <input type="email" id="email" class="form-control">
                        <div class="error-message" id="email-error">Please enter a valid email address</div>
                    </div>
                    
                    <button type="submit" class="submit-btn">Generate My Diet Plan</button>
                </form>
            </div>
        </div>
    </section>

    <section class="loading-section" id="loading-section">
        <div class="container">
            <div class="loading-spinner"></div>
            <h2>Crafting your personalized diet plan‚Ä¶ hang tight!</h2>
            <p>Processing your request‚Ä¶</p>
        </div>
    </section>

    <section class="results-section" id="results-section">
        <div class="container">
            <div class="diet-plan" id="diet-plan-content">
                <!-- Diet plan will be populated here -->
            </div>
            <div class="text-center">
                <button class="download-btn" id="download-pdf">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                    </svg>
                    Download PDF
                </button>
                <button class="submit-btn mt-2" id="create-new-plan">Create Another Diet Plan</button>
            </div>
        </div>
    </section>

    <footer id="footer-section">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">ChartMyDiet</div>
                <div class="footer-contact">Contact: AFK | +91 9284424471 | abdulfirozkhan71@gmail.com</div>
                <div class="footer-copyright">¬© 2025 ChartMyDiet. All rights reserved.</div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation elements
            const homeLink = document.getElementById('home-link');
            const homeNav = document.getElementById('home-nav');
            const aboutNav = document.getElementById('about-nav');
            const contactNav = document.getElementById('contact-nav');
            
            // Section elements
            const headerSection = document.getElementById('header-section');
            const aboutSection = document.getElementById('about-section');
            const formSection = document.querySelector('.form-section');
            const footerSection = document.getElementById('footer-section');
            
            // Form elements
            const dietForm = document.getElementById('diet-form-element');
            const nameInput = document.getElementById('name');
            const genderSelect = document.getElementById('gender');
            const ageInput = document.getElementById('age');
            const weightInput = document.getElementById('weight');
            const heightCmInput = document.getElementById('height-cm');
            const heightFtInput = document.getElementById('height-ft');
            const heightInInput = document.getElementById('height-in');
            const emailInput = document.getElementById('email');
            
            // Goal radio buttons
            const goalRadios = document.querySelectorAll('input[name="goal"]');
            
            // Height unit selector
            const heightUnitButtons = document.querySelectorAll('.height-unit-selector button');
            const heightCmContainer = document.getElementById('height-cm-input');
            const heightFtContainer = document.getElementById('height-ft-input');
            
            // Disease checkboxes
            const noDiseaseCheckbox = document.getElementById('no-disease');
            const pcosCheckbox = document.getElementById('pcos');
            const diseaseCheckboxes = document.querySelectorAll('input[name="disease"]');
            
            // Sections
            const loadingSection = document.getElementById('loading-section');
            const resultsSection = document.getElementById('results-section');
            const dietPlanContent = document.getElementById('diet-plan-content');
            const downloadPdfBtn = document.getElementById('download-pdf');
            const createNewPlanBtn = document.getElementById('create-new-plan');
            
            // Navigation functionality - FIXED HOME NAVIGATION
            homeLink.addEventListener('click', function() {
                showHomePage();
            });
            
            homeNav.addEventListener('click', function(e) {
                e.preventDefault();
                showHomePage();
            });
            
            function showHomePage() {
                // Show all main sections for home page
                headerSection.style.display = 'block';
                formSection.style.display = 'block';
                aboutSection.style.display = 'none';
                loadingSection.style.display = 'none';
                resultsSection.style.display = 'none';
                window.scrollTo(0, 0);
            }
            
            aboutNav.addEventListener('click', function(e) {
                e.preventDefault();
                headerSection.style.display = 'none';
                formSection.style.display = 'none';
                aboutSection.style.display = 'block';
                resultsSection.style.display = 'none';
                window.scrollTo(0, 0);
            });
            
            contactNav.addEventListener('click', function(e) {
                e.preventDefault();
                headerSection.style.display = 'none';
                formSection.style.display = 'none';
                aboutSection.style.display = 'none';
                resultsSection.style.display = 'none';
                footerSection.scrollIntoView({ behavior: 'smooth' });
            });
            
            // Height unit switching
            heightUnitButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const unit = this.getAttribute('data-unit');
                    
                    // Update active state
                    heightUnitButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show/hide appropriate inputs
                    if (unit === 'cm') {
                        heightCmContainer.style.display = 'block';
                        heightFtContainer.style.display = 'none';
                        heightCmInput.required = true;
                        heightFtInput.required = false;
                        heightInInput.required = false;
                    } else {
                        heightCmContainer.style.display = 'none';
                        heightFtContainer.style.display = 'block';
                        heightCmInput.required = false;
                        heightFtInput.required = true;
                        heightInInput.required = true;
                    }
                });
            });
            
            // Gender change handler - disable PCOS for males
            genderSelect.addEventListener('change', function() {
                const isMale = this.value === 'Male';
                
                if (isMale) {
                    // Disable PCOS checkbox for males
                    pcosCheckbox.disabled = true;
                    pcosCheckbox.checked = false;
                } else {
                    // Enable PCOS checkbox for females or when no gender selected
                    pcosCheckbox.disabled = false;
                }
            });
            
            // Disease checkbox logic
            noDiseaseCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    // Uncheck all other disease checkboxes
                    diseaseCheckboxes.forEach(checkbox => {
                        if (checkbox !== noDiseaseCheckbox) {
                            checkbox.checked = false;
                        }
                    });
                }
            });
            
            // Disease mutual exclusion logic
            diseaseCheckboxes.forEach(checkbox => {
                if (checkbox !== noDiseaseCheckbox) {
                    checkbox.addEventListener('change', function() {
                        if (this.checked) {
                            // Uncheck "No Disease" if any other disease is selected
                            noDiseaseCheckbox.checked = false;
                            
                            // Check for mutually exclusive pairs
                            if (this.value === 'Diabetes') {
                                document.getElementById('diabetes-mellitus').checked = false;
                            } else if (this.value === 'Diabetes Mellitus') {
                                document.getElementById('diabetes').checked = false;
                            } else if (this.value === 'High Blood Pressure') {
                                document.getElementById('low-bp').checked = false;
                            } else if (this.value === 'Low Blood Pressure') {
                                document.getElementById('high-bp').checked = false;
                            } else if (this.value === 'Hypothyroidism') {
                                document.getElementById('hyperthyroidism').checked = false;
                            } else if (this.value === 'Hyperthyroidism') {
                                document.getElementById('hypothyroidism').checked = false;
                            }
                        }
                    });
                }
            });
            
            // Form validation
            function validateForm() {
                let isValid = true;
                
                // Reset error messages
                document.querySelectorAll('.error-message').forEach(el => {
                    el.style.display = 'none';
                });
                
                // Name validation
                if (!nameInput.value.trim()) {
                    document.getElementById('name-error').style.display = 'block';
                    isValid = false;
                }
                
                // Gender validation
                if (!genderSelect.value) {
                    document.getElementById('gender-error').style.display = 'block';
                    isValid = false;
                }
                
                // Age validation
                const age = parseInt(ageInput.value);
                if (isNaN(age) || age < 15 || age > 100) {
                    document.getElementById('age-error').style.display = 'block';
                    isValid = false;
                }
                
                // Weight validation
                const weight = parseFloat(weightInput.value);
                if (isNaN(weight) || weight <= 0) {
                    document.getElementById('weight-error').style.display = 'block';
                    isValid = false;
                }
                
                // Height validation
                const isCmSelected = document.querySelector('.height-unit-selector button.active').getAttribute('data-unit') === 'cm';
                if (isCmSelected) {
                    const heightCm = parseFloat(heightCmInput.value);
                    if (isNaN(heightCm) || heightCm <= 0) {
                        document.getElementById('height-cm-error').style.display = 'block';
                        isValid = false;
                    }
                } else {
                    const heightFt = parseInt(heightFtInput.value);
                    const heightIn = parseInt(heightInInput.value);
                    if (isNaN(heightFt) || heightFt < 0 || isNaN(heightIn) || heightIn < 0 || heightIn > 11) {
                        if (isNaN(heightFt) || heightFt < 0) {
                            document.getElementById('height-ft-error').style.display = 'block';
                        }
                        if (isNaN(heightIn) || heightIn < 0 || heightIn > 11) {
                            document.getElementById('height-in-error').style.display = 'block';
                        }
                        isValid = false;
                    }
                }
                
                // Activity level validation
                const activitySelected = document.querySelector('input[name="activity"]:checked');
                if (!activitySelected) {
                    document.getElementById('activity-error').style.display = 'block';
                    isValid = false;
                }
                
                // Diet restriction validation
                const dietSelected = document.querySelector('input[name="diet"]:checked');
                if (!dietSelected) {
                    document.getElementById('diet-error').style.display = 'block';
                    isValid = false;
                }
                
                // Disease validation - at least one must be selected
                const diseaseSelected = document.querySelector('input[name="disease"]:checked');
                if (!diseaseSelected) {
                    document.getElementById('disease-error').style.display = 'block';
                    isValid = false;
                }
                
                // Email validation (if provided)
                if (emailInput.value && !isValidEmail(emailInput.value)) {
                    document.getElementById('email-error').style.display = 'block';
                    isValid = false;
                }
                
                return isValid;
            }
            
            function isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }
            
            // Convert height to cm
            function getHeightInCm() {
                const isCmSelected = document.querySelector('.height-unit-selector button.active').getAttribute('data-unit') === 'cm';
                
                if (isCmSelected) {
                    return parseFloat(heightCmInput.value);
                } else {
                    const feet = parseInt(heightFtInput.value);
                    const inches = parseInt(heightInInput.value);
                    return (feet * 30.48) + (inches * 2.54);
                }
            }
            
            // Get selected goal
            function getSelectedGoal() {
                const selectedGoal = document.querySelector('input[name="goal"]:checked');
                return selectedGoal ? selectedGoal.value : null;
            }
            
            // Get selected diseases - if none selected, default to "No Disease"
            function getSelectedDiseases() {
                const selectedDiseases = Array.from(document.querySelectorAll('input[name="disease"]:checked'))
                    .map(checkbox => checkbox.value);
                
                return selectedDiseases.length > 0 ? selectedDiseases : ['No Disease'];
            }
            
            // Form submission
            dietForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (!validateForm()) {
                    return;
                }
                
                // Show loading section
                loadingSection.style.display = 'block';
                formSection.style.display = 'none';
                aboutSection.style.display = 'none';
                headerSection.style.display = 'none';
                
                // Prepare form data
                const formData = {
                    Name: nameInput.value.trim(),
                    Gender: genderSelect.value,
                    Age: parseInt(ageInput.value),
                    Height: getHeightInCm(),
                    Weight: parseFloat(weightInput.value),
                    Activity_Level: document.querySelector('input[name="activity"]:checked').value,
                    Diet_Restriction: document.querySelector('input[name="diet"]:checked').value,
                    Disease: getSelectedDiseases(),
                    Goal: getSelectedGoal(), // Include goal in submission
                    Email: emailInput.value.trim() || undefined
                };
                
                // Submit to webhook
                fetch('https://abdulkhan.mywire.org/webhook/diet-plan5', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // Hide loading section
                    loadingSection.style.display = 'none';
                    
                    // Display results
                    displayDietPlan(data);
                    resultsSection.style.display = 'block';
                })
                .catch(error => {
                    console.error('Error:', error);
                    loadingSection.style.display = 'none';
                    formSection.style.display = 'block';
                    alert('There was an error generating your diet plan. Please try again.');
                });
            });
            
            // Display diet plan
            function displayDietPlan(data) {
                // Format the diet plan according to the specified structure
                let html = '';
                
                // Main header with user name
                html += `<div style="text-align:center;">
                    <h2 style="color:#7C3AED; font-size:1.75rem;">ü•ó Personalized 2-Day Diet Plan for <span style="color:#7C3AED; font-size:1.75rem;">${data.name}</span></h2>
                </div>`;
                
                // Health Profile section
                html += `<div class="health-profile">
                    <h3>üß¨ Health Profile</h3>
                    <p>BMI: ${data.bmiNumber}</p>
                    <p>Category: ${data.bmiCategory}</p>
                    <p>Target Calorie Intake: ${data.finalCalories} kcal/day</p>
                    <p>${data.calorieNote}</p>
                    <p>‚Ä¢ Diet Restriction: ${data.Diet_Restriction}</p>
                    <p>‚Ä¢ Diseases: ${data.diseases.join(', ')}</p>
                    ${data.Goal ? `<p>‚Ä¢ Goal: ${data.Goal}</p>` : ''}
                </div>`;
                
                // Early Morning section
                if (data.dietTemplate && data.dietTemplate.EarlyMorning) {
                    html += `<div class="meal-section">
                        <h3>üåÖ Early Morning (6:30 AM)</h3>
                        <ul>
                            ${data.dietTemplate.EarlyMorning.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                        <p>Calories: ${getCleanMacros(data.dietTemplate.EarlyMorning, data.macroMap).calories} kcal | Protein: ${getCleanMacros(data.dietTemplate.EarlyMorning, data.macroMap).protein}g | Carbs: ${getCleanMacros(data.dietTemplate.EarlyMorning, data.macroMap).carbs}g | Fat: ${getCleanMacros(data.dietTemplate.EarlyMorning, data.macroMap).fat}g</p>
                    </div>`;
                }
                
                // Breakfast section with Day 1 and Day 2
                if (data.dietTemplate && (data.dietTemplate.BreakfastDay1 || data.dietTemplate.BreakfastDay2)) {
                    html += `<div class="meal-section">
                        <h3><strong>üç≥ Breakfast (8:00 AM)</strong></h3>
                        <div class="day-header day-1">Day 1:</div>
                        <div class="day-content">
                            <ul>
                                ${data.dietTemplate.BreakfastDay1 ? data.dietTemplate.BreakfastDay1.map(item => `<li>${item}</li>`).join('') : ''}
                            </ul>
                            <p>${formatMealMacros(data.dietTemplate.BreakfastDay1, data.macroMap)}</p>
                        </div>
                        <div class="day-header day-2">Day 2:</div>
                        <div class="day-content">
                            <ul>
                                ${data.dietTemplate.BreakfastDay2 ? data.dietTemplate.BreakfastDay2.map(item => `<li>${item}</li>`).join('') : ''}
                            </ul>
                            <p>${formatMealMacros(data.dietTemplate.BreakfastDay2, data.macroMap)}</p>
                        </div>
                    </div>`;
                }
                
                // Mid-Morning Snack section with Day 1 and Day 2
                if (data.dietTemplate && (data.dietTemplate.SnackDay1 || data.dietTemplate.SnackDay2)) {
                    html += `<div class="meal-section">
                        <h3><strong>üçé Mid-Morning Snack (10:30 AM)</strong></h3>
                        <div class="day-header day-1">Day 1:</div>
                        <div class="day-content">
                            <ul>
                                ${data.dietTemplate.SnackDay1 ? data.dietTemplate.SnackDay1.map(item => `<li>${item}</li>`).join('') : ''}
                            </ul>
                            <p>${formatMealMacros(data.dietTemplate.SnackDay1, data.macroMap)}</p>
                        </div>
                        <div class="day-header day-2">Day 2:</div>
                        <div class="day-content">
                            <ul>
                                ${data.dietTemplate.SnackDay2 ? data.dietTemplate.SnackDay2.map(item => `<li>${item}</li>`).join('') : ''}
                            </ul>
                            <p>${formatMealMacros(data.dietTemplate.SnackDay2, data.macroMap)}</p>
                        </div>
                    </div>`;
                }
                
                // Lunch section with Day 1 and Day 2
                if (data.dietTemplate && (data.dietTemplate.LunchDay1 || data.dietTemplate.LunchDay2)) {
                    html += `<div class="meal-section">
                        <h3><strong>üç≤ Lunch (1:00 PM)</strong></h3>
                        <div class="day-header day-1">Day 1:</div>
                        <div class="day-content">
                            <ul>
                                ${data.dietTemplate.LunchDay1 ? data.dietTemplate.LunchDay1.map(item => `<li>${item}</li>`).join('') : ''}
                            </ul>
                            <p>${formatMealMacros(data.dietTemplate.LunchDay1, data.macroMap)}</p>
                        </div>
                        <div class="day-header day-2">Day 2:</div>
                        <div class="day-content">
                            <ul>
                                ${data.dietTemplate.LunchDay2 ? data.dietTemplate.LunchDay2.map(item => `<li>${item}</li>`).join('') : ''}
                            </ul>
                            <p>${formatMealMacros(data.dietTemplate.LunchDay2, data.macroMap)}</p>
                        </div>
                    </div>`;
                }
                
                // Evening Snack section with Day 1 and Day 2
                if (data.dietTemplate && (data.dietTemplate.EveningSnackDay1 || data.dietTemplate.EveningSnackDay2)) {
                    html += `<div class="meal-section">
                        <h3><strong>‚òï Evening Snack (4:30 PM)</strong></h3>
                        <div class="day-header day-1">Day 1:</div>
                        <div class="day-content">
                            <ul>
                                ${data.dietTemplate.EveningSnackDay1 ? data.dietTemplate.EveningSnackDay1.map(item => `<li>${item}</li>`).join('') : ''}
                            </ul>
                            <p>${formatMealMacros(data.dietTemplate.EveningSnackDay1, data.macroMap)}</p>
                        </div>
                        <div class="day-header day-2">Day 2:</div>
                        <div class="day-content">
                            <ul>
                                ${data.dietTemplate.EveningSnackDay2 ? data.dietTemplate.EveningSnackDay2.map(item => `<li>${item}</li>`).join('') : ''}
                            </ul>
                            <p>${formatMealMacros(data.dietTemplate.EveningSnackDay2, data.macroMap)}</p>
                        </div>
                    </div>`;
                }
                
                // Dinner section with Day 1 and Day 2
                if (data.dietTemplate && (data.dietTemplate.DinnerDay1 || data.dietTemplate.DinnerDay2)) {
                    html += `<div class="meal-section">
                        <h3><strong>üçõ Dinner (7:30 PM)</strong></h3>
                        <div class="day-header day-1">Day 1:</div>
                        <div class="day-content">
                            <ul>
                                ${data.dietTemplate.DinnerDay1 ? data.dietTemplate.DinnerDay1.map(item => `<li>${item}</li>`).join('') : ''}
                            </ul>
                            <p>${formatMealMacros(data.dietTemplate.DinnerDay1, data.macroMap)}</p>
                        </div>
                        <div class="day-header day-2">Day 2:</div>
                        <div class="day-content">
                            <ul>
                                ${data.dietTemplate.DinnerDay2 ? data.dietTemplate.DinnerDay2.map(item => `<li>${item}</li>`).join('') : ''}
                            </ul>
                            <p>${formatMealMacros(data.dietTemplate.DinnerDay2, data.macroMap)}</p>
                        </div>
                    </div>`;
                }
                
                // Bedtime section
                if (data.dietTemplate && data.dietTemplate.Bedtime) {
                    html += `<div class="meal-section">
                        <h3>üõèÔ∏è Bedtime (9:30 PM)</h3>
                        <ul>
                            ${data.dietTemplate.Bedtime.map(item => `<li>${item}</li>`).join('')}
                        </ul>
                        <p>Calories: ${getCleanMacros(data.dietTemplate.Bedtime, data.macroMap).calories} kcal | Protein: ${getCleanMacros(data.dietTemplate.Bedtime, data.macroMap).protein}g | Carbs: ${getCleanMacros(data.dietTemplate.Bedtime, data.macroMap).carbs}g | Fat: ${getCleanMacros(data.dietTemplate.Bedtime, data.macroMap).fat}g</p>
                    </div>`;
                }
                
                // Daily Macronutrient Summary
                if (data.dailyMacros) {
                    html += `<div class="meal-section">
                        <h3>üßÆ Daily Macronutrient Summary</h3>
                        <p>‚Ä¢ Day 1 Totals: ${data.dailyMacros.day1 ? `${data.dailyMacros.day1.calories} kcal | Protein: ${data.dailyMacros.day1.protein}g | Carbs: ${data.dailyMacros.day1.carbs}g | Fat: ${data.dailyMacros.day1.fat}g` : 'N/A'}</p>
                        <p>‚Ä¢ Day 2 Totals: ${data.dailyMacros.day2 ? `${data.dailyMacros.day2.calories} kcal | Protein: ${data.dailyMacros.day2.protein}g | Carbs: ${data.dailyMacros.day2.carbs}g | Fat: ${data.dailyMacros.day2.fat}g` : 'N/A'}</p>
                    </div>`;
                }
                
                                
                // Special Considerations
                if (data.diseaseConsiderations && data.diseaseConsiderations.length > 0) {
                    html += `<div class="special-considerations">
                        <h3>‚öïÔ∏è Special Considerations</h3>
                        <ul>
                            ${data.diseaseConsiderations.map(consideration => `<li>${consideration}</li>`).join('')}
                        </ul>
                    </div>`;
                }
                
                // Important Disclaimer
                html += `<div class="disclaimer">
                    <h3>üìå Important Disclaimer</h3>
                    <p>This is a sample diet plan for informational purposes only.</p>
                    <p>Please consult your doctor or a registered dietitian before making any dietary changes.</p>
                </div>`;
                
                dietPlanContent.innerHTML = html;
            }
            
            // Helper function to calculate macros for a meal
            function getCleanMacros(items, macroMap) {
                if (!items || !Array.isArray(items) || !macroMap) {
                    return { calories: 0, protein: 0, carbs: 0, fat: 0 };
                }
                
                return items.reduce((totals, item) => {
                    const cleanItem = item.replace(" ‚≠ê", "").trim();
                    const macros = macroMap[cleanItem];
                    if (macros) {
                        totals.calories += macros.calories || 0;
                        totals.protein += macros.protein || 0;
                        totals.carbs += macros.carbs || 0;
                        totals.fat += macros.fat || 0;
                    }
                    return totals;
                }, { calories: 0, protein: 0, carbs: 0, fat: 0 });
            }
            
            // Helper function to format meal macros
            function formatMealMacros(mealItems, macroMap) {
                if (!mealItems || !Array.isArray(mealItems) || mealItems.length === 0) {
                    return 'Calories: 0 kcal | Protein: 0g | Carbs: 0g | Fat: 0g';
                }
                
                const macros = getCleanMacros(mealItems, macroMap);
                return `Calories: ${macros.calories} kcal | Protein: ${macros.protein}g | Carbs: ${macros.carbs}g | Fat: ${macros.fat}g`;
            }
            
            // PDF Download functionality
            downloadPdfBtn.addEventListener('click', function() {
                generatePDF();
            });
            
            function generatePDF() {
                // Show loading state
                const originalText = downloadPdfBtn.innerHTML;
                downloadPdfBtn.innerHTML = '<div class="loading-spinner" style="width: 20px; height: 20px; border-width: 2px;"></div> Generating PDF...';
                downloadPdfBtn.disabled = true;
                
                // Use jsPDF to generate PDF
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                // Get user name for filename
                const userName = nameInput.value.trim() || 'User';
                
                // Add content to PDF
                doc.setFontSize(20);
                doc.setTextColor(124, 58, 237); // Primary color #7C3AED
                doc.text('ü•ó Personalized Diet Plan', 105, 20, { align: 'center' });
                
                doc.setFontSize(16);
                doc.setTextColor(0, 0, 0);
                doc.text(`For: ${userName}`, 105, 30, { align: 'center' });
                
                // Get the diet plan content
                const dietPlanElement = document.getElementById('diet-plan-content');
                
                // Use html2canvas to capture the content as an image
                html2canvas(dietPlanElement, {
                    scale: 2,
                    useCORS: true,
                    logging: false
                }).then(canvas => {
                    const imgData = canvas.toDataURL('image/png');
                    const imgWidth = 190;
                    const pageHeight = 280;
                    const imgHeight = canvas.height * imgWidth / canvas.width;
                    let heightLeft = imgHeight;
                    let position = 40; // Start position after header
                    
                    doc.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                    
                    // Add new pages if needed
                    while (heightLeft >= 0) {
                        position = heightLeft - imgHeight + 40;
                        doc.addPage();
                        doc.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
                        heightLeft -= pageHeight;
                    }
                    
                    // Save the PDF
                    doc.save(`DietPlan_${userName}_${new Date().toISOString().split('T')[0]}.pdf`);
                    
                    // Restore button state
                    downloadPdfBtn.innerHTML = originalText;
                    downloadPdfBtn.disabled = false;
                }).catch(error => {
                    console.error('Error generating PDF:', error);
                    alert('Error generating PDF. Please try again.');
                    
                    // Restore button state
                    downloadPdfBtn.innerHTML = originalText;
                    downloadPdfBtn.disabled = false;
                });
            }
            
            // Create new plan button
            createNewPlanBtn.addEventListener('click', function() {
                resultsSection.style.display = 'none';
                formSection.style.display = 'block';
                headerSection.style.display = 'block';
                window.scrollTo(0, 0);
                
                // Reset form
                dietForm.reset();
                
                // Reset height unit to cm
                heightUnitButtons.forEach(btn => btn.classList.remove('active'));
                heightUnitButtons[0].classList.add('active');
                heightCmContainer.style.display = 'block';
                heightFtContainer.style.display = 'none';
                heightCmInput.required = true;
                heightFtInput.required = false;
                heightInInput.required = false;
                
                // Reset disease checkboxes
                diseaseCheckboxes.forEach(checkbox => {
                    checkbox.checked = false;
                });
                
                // Enable all disease checkboxes
                diseaseCheckboxes.forEach(checkbox => {
                    checkbox.disabled = false;
                });
            });
        });
    </script>
</body>
</html>